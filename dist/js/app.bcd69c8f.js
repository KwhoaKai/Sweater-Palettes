(function(t){function e(e){for(var o,r,a=e[0],c=e[1],l=e[2],u=0,d=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);h&&h(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],o=!0,a=1;a<i.length;a++){var c=i[a];0!==s[c]&&(o=!1)}o&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var o={},s={app:0},n=[];function r(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=o,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/Sweater-Palettes/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var h=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"255d":function(t,e,i){"use strict";i("aef3")},"3c58":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t._m(0),i("SearchView",{attrs:{imgDict:t.imgDict,clustDict:t.clustDict}})],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"navDiv"}},[i("h1",{staticClass:"side-vert-text"},[t._v("外套色板")])])}],r=i("1da1"),a=(i("96cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"",id:"searchDiv"}},[i("div",{attrs:{id:"leftBorder"}}),i("v-row",{staticClass:"pad-bot-2"},[i("v-col",{staticClass:"mr-auto",attrs:{id:"titleDiv",md:5,lg:3}},[i("h1",{staticClass:"titleText"},[t._v("SWEATER")]),i("h1",{staticClass:"titleText"},[t._v("PALETTESS")])]),i("v-spacer"),i("v-col",{staticClass:"text-left",attrs:{md:6,lg:7,xl:7}},[i("PaletteBuilder",{attrs:{userColors:t.userColors},on:{setUserColors:t.setUserColors,searchClicked:t.searchClicked}})],1)],1),i("transition",{attrs:{name:"fade"}},[t.showSteps?i("div",{staticStyle:{float:"left"},attrs:{id:"stepsDiv"}},[i("transition",{attrs:{name:"fade"}},[i("h1",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}],staticClass:"stepText",staticStyle:{"text-align":"left"}},[t._v(" 00 - CREATE A COLOR PALETTE ")])]),i("transition",{attrs:{name:"fade"}},[i("h1",{directives:[{name:"show",rawName:"v-show",value:t.show2,expression:"show2"}],staticClass:"stepText",staticStyle:{"text-align":"left"}},[t._v(" 01 - FIND SWEATERS ")])]),i("transition",{attrs:{name:"fade"}},[i("h1",{directives:[{name:"show",rawName:"v-show",value:t.show3,expression:"show3"}],staticClass:"stepText",staticStyle:{"text-align":"left"}},[t._v(" 02 - BE HAPPY(?) ")])])],1):t._e()]),i("transition",{attrs:{name:"fade"}},[t.showGif?i("div",{staticStyle:{float:"right"},attrs:{id:"introGifDiv"}},[i("img",{staticClass:"introGifWidth",attrs:{src:"sweaterScroll.gif"}})]):t._e()]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showImgs,expression:"showImgs"}],attrs:{id:"imgDiv"}})]),i("canvas",{attrs:{id:"canvas"}})],1)}),c=[],l=(i("b64b"),i("d81d"),i("4e82"),i("fb6a"),i("b680"),i("99af"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{id:"builder-div"}},[i("v-spacer"),i("v-col",{staticClass:"no-pr no-pb pad-t12",attrs:{lg:10,md:10,"no-gutters":""}},[i("span",{staticClass:"text-bold bar-toptext",staticStyle:{float:"left"}},[t._v(" 请选择五种颜色 - PLEASE SELECT 5 COLORS ")]),i("p",{staticClass:"text-bold bar-toptext trans-left",staticStyle:{float:"right"}},[t._v(" 2021年 - 9月 ")])]),i("v-col",{staticClass:"text-left no-pr no-pb no-pt",attrs:{lg:12,md:12,"no-gutters":""}},[i("v-row",{attrs:{col:"12",sm:12}},[i("v-spacer"),t._l(t.userColors,(function(e){return i("PaletteBlock",{key:e.i,staticClass:"block-div no-pr",attrs:{colObj:e,showIdx:t.showIdx},on:{setShowIdx:t.setShowIdx,setColor:t.setColor}})}))],2),i("v-row",{attrs:{col:"12"}},[i("v-spacer"),i("v-col",{staticClass:"cursor-pointer",attrs:{md:10,lg:10},on:{click:t.searchClicked}},[i("pre",{},[t._v("SEARCH ––––– NOW")]),i("pre",[t._v("     SEARCH ––––– NOW")]),i("pre",[t._v("     SEARCH ––––– NOW")])])],1)],1)],1)}),h=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-col",{attrs:{md:2,xl:2,lg:2,sm:2}},[i("div",{staticClass:"colorDisplay",style:{"background-color":t.curHex},on:{click:t.togglePicker,mouseover:function(e){t.hoverBlock=!0},mouseleave:function(e){t.hoverBlock=!1}}},[i("div",{staticClass:"hoverDiv"})]),i("div",{staticClass:"pos-abs",attrs:{id:"colorPickerDiv"}},[i("transition",{attrs:{name:"fade"}},[t.showColorPicker?i("ColorPicker",{staticClass:"pos-rel picker",attrs:{setRgb:t.curRgb,width:t.pickerWidth},on:{colChanged:t.setCols}}):t._e()],1)],1)])},d=[],p=(i("d3b7"),i("25f0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"picker",staticClass:"pickerComponent",style:{"background-color":"rgb("+t.setRgb.r+", "+t.setRgb.g+", "+t.setRgb.b+")"}})}),f=[],g=(i("a9e3"),i("a900")),m={props:{setRgb:{default:{r:255,g:255,b:255}},value:{default:"#ffffff"},width:{type:Number,default:250},height:{type:Number,default:250},handleSvg:{type:String,default:null},handleOrigin:{type:Object,default:function(){return{x:0,y:0}}},padding:{type:Number,default:6},handleRadius:{type:Number,default:8},sliderMargin:{type:Number,default:24},sliderHeight:{type:Number,default:void 0},borderWidth:{type:Number,default:0},borderColor:{type:String,default:"#ffffff"},display:{type:String,default:"block"},layout:{type:String,default:"block"},wheelAngle:{type:Number,default:0},wheelDirection:{type:String,default:"anticlockwise"},wheelLightness:{type:Boolean,default:!0},css:{type:Object,default:function(){}}},data:function(){return{colorPicker:null}},methods:{onInput:function(t){this.$emit("input",t.rgb)},onColorChange:function(t,e){this.$emit("color:change",{color:t,changes:e});var i=this.colorPicker.color.rgb,o=this.colorPicker.color.hexString,s={rgb:i,hex:o};this.$emit("colChanged",{colors:s})},onColorInit:function(t,e){this.$emit("color:init",{color:t,changes:e})},onInputChange:function(t,e){this.$emit("input:change",{color:t,changes:e})},onInputStart:function(t){this.$emit("input:start",{color:t})},onInputMove:function(t){this.$emit("input:move",{color:t})},onInputEnd:function(t){this.$emit("input:end",{color:t})},onMount:function(t){this.$emit("mount",{colorPicker:t})}},mounted:function(){this.colorPicker=new g["a"].ColorPicker(this.$refs.picker,{width:this.width,height:this.height,handleSvg:this.handleSvg,color:this.value,padding:this.padding,layout:this.layout,display:this.display,css:this.css,wheelDirection:this.wheelDirection,wheelAngle:this.wheelAngle,wheelLightness:this.wheelLightness,handleOrigin:this.handleOrigin,handleRadius:this.handleRadius,sliderMargin:this.sliderMargin,sliderHeight:this.sliderHeight,borderWidth:this.borderWidth,borderColor:this.borderColor}),this.colorPicker.on("input:end",this.onInput),this.colorPicker.on("color:change",this.onColorChange),this.colorPicker.on("color:init",this.onColorInit),this.colorPicker.on("input:change",this.onInputChange),this.colorPicker.on("input:start",this.onInputStart),this.colorPicker.on("input:move",this.onInputMove),this.colorPicker.on("input:end",this.onInputEnd),this.colorPicker.on("mount",this.onMount)},beforeUnmount:function(){this.colorPicker.off("input:end",this.onInput),this.colorPicker.off("color:change",this.onColorChange),this.colorPicker.off("color:init",this.onColorInit),this.colorPicker.off("input:change",this.onInputChange),this.colorPicker.off("input:start",this.onInputStart),this.colorPicker.off("input:move",this.onInputMove),this.colorPicker.off("input:end",this.onInputEnd),this.colorPicker.off("mount",this.onMount)},watch:{value:function(t){this.colorPicker.color&&(this.colorPicker.color.rgb=t)}}},v=m,b=(i("9a1c"),i("2877")),w=Object(b["a"])(v,p,f,!1,null,"06ec6080",null),k=w.exports,C={name:"PaletteBlock",props:{colObj:Object,showIdx:null},components:{ColorPicker:k},data:function(){return{curRgb:null,curHex:null,pickerWidth:250,i:null,r:null,g:null,b:null,hoverBlock:null}},computed:{showColorPicker:function(){return this.showIdx==this.i}},mounted:function(){this.i=this.colObj.i,this.r=this.colObj.r,this.g=this.colObj.g,this.b=this.colObj.b,this.curHex=this.rgbToHex(this.colObj),this.curRgb={r:this.r,g:this.g,b:this.b},this.setDims(),window.addEventListener("resize",this.setDims),console.log("block mounted",this.colObj),console.log(this.i,this.showIdx)},methods:{componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},rgbToHex:function(t){return"#"+this.componentToHex(t.r)+this.componentToHex(t.g)+this.componentToHex(t.b)},setCols:function(t){console.log("in setCols"),console.log(this.i,this.r,this.g,this.b,this.showIdx),this.curRgb=t.colors.rgb,this.curHex=t.colors.hex,this.$emit("setColor",{rgb:this.curRgb,hex:this.curHex},this.i)},togglePicker:function(){this.showIdx==this.i?this.$emit("setShowIdx",-1):this.$emit("setShowIdx",this.i)},setDims:function(){var t=document.body.clientWidth,e=document.getElementsByClassName("colorDisplay");t>=1280?(this.pickerWidth=250,e.forEach((function(t){t.style.width="100px",t.style.height="100px"}))):t>=1e3?(this.pickerWidth=200,e.forEach((function(t){t.style.width="75px",t.style.height="75px"}))):t>=728&&(this.pickerWidth=150,e.forEach((function(t){t.style.width="75px",t.style.height="75px"})))}},destroyed:function(){window.removeEventListener("resize",this.setDims)}},y=C,x=(i("7512"),i("6544")),S=i.n(x),P=i("62ad"),I=Object(b["a"])(y,u,d,!1,null,"c5bf7428",null),O=I.exports;S()(I,{VCol:P["a"]});var D={name:"PaletteBuilder",props:{userColors:Array},data:function(){return{showIdx:-1}},mounted:function(){var t=this;console.log("userColors prop in palette builder mount",this.userColors);document.body.addEventListener("mousedown",(function(e){e=e||window.event;var i="circle"==e.target.nodeName|"rect"==e.target.nodeName,o=e.target.classList.contains("colorDisplay");i||o||t.setShowIdx(-1)}))},components:{PaletteBlock:O},methods:{setShowIdx:function(t){this.showIdx=t},setColor:function(t,e){var i=this.userColors,o=t.rgb;i[e].r=o.r,i[e].g=o.g,i[e].b=o.b,this.userColors=i,console.log("usercols in palettebuilder",this.userColors),this.$emit("setUserColors",this.userColors)},searchClicked:function(){this.$emit("searchClicked")}}},E=D,_=(i("d1d8"),i("0fd9")),j=i("2fa4"),N=Object(b["a"])(E,l,h,!1,null,"55d4ce16",null),R=N.exports;S()(N,{VCol:P["a"],VRow:_["a"],VSpacer:j["a"]});var T=i("2ef0"),H=i.n(T),M=i("c101"),$=i("5a89"),A=(i("34ad"),{name:"SearchView",props:{imgDict:null,clustDict:null},data:function(){return{userColors:[{i:0,r:212,g:212,b:212},{i:1,r:175,g:175,b:175},{i:2,r:91,g:91,b:91},{i:3,r:51,g:51,b:51},{i:4,r:0,g:0,b:0}],numResults:50,show1:!1,show2:!1,show3:!1,showSteps:!0,stepsFaded:!1,showGif:!0,showImgs:!1}},components:{PaletteBuilder:R},mounted:function(){this.showGif=!0;var t=700;setTimeout(function(){this.show1=!0}.bind(this),t),setTimeout(function(){this.show2=!0}.bind(this),2*t),setTimeout(function(){this.show3=!0}.bind(this),3*t)},methods:{setUserColors:function(t){this.userColors=t,console.log("passed color obj in searchview",t),console.log("this.userColors searchview",this.userColors)},searchClicked:function(){this.showImgs=!1,this.showSteps=!1,this.showGif=!1,console.log("this.userColors in searchview before search",this.userColors),this.searchImgs()},searchImgs:function(){console.log("searching with these colors: ",this.userColors);for(var t=Object.keys(this.imgDict),e=[],i=0;i<t.length;i++){var o=t[i],s=this.imgDict[o]["palette"],n=H.a.cloneDeep(this.userColors);console.log(n),console.log(this.userColors),n.map((function(t){return delete t.i,JSON.parse(JSON.stringify(t))}));var r=JSON.parse(JSON.stringify(s)),a=this.getPalDist(r,n);e.push({key:o,dist:a})}e.sort((function(t,e){return t.dist-e.dist})),console.log(e.slice(0,3),"fuck"),console.log(e),setTimeout(function(){var t=document.getElementById("imgDiv");t.textContent="",this.appendImages(e)}.bind(this),600)},appendImages:function(t){for(var e=0;e<this.numResults;e++){var i=t[e].key,o=document.createElement("img"),s=document.createElement("div");s.classList.add("img_div");var n=this.imgDict[i].caption,r=document.createElement("p");r.innerHTML=n;var a=t[e].dist,c=document.createElement("p");c.innerHTML="MICDP Distance: ".concat(a.toFixed(2));for(var l=document.createElement("div"),h=0;h<5;h++){var u=this.imgDict[i].palette[h],d=JSON.parse(JSON.stringify(u)),p="rgb(".concat(d.r,", ").concat(d.g,", ").concat(d.b,")"),f=document.createElement("div");f.classList.add("col_block"),f.style.background=p,l.appendChild(f)}s.appendChild(o),s.appendChild(l),s.appendChild(r),s.appendChild(c),o.src="images/".concat(t[e].key);var g=window.innerWidth<1200?200:250;o.width=g;var m=document.getElementById("imgDiv");m.appendChild(s)}this.showImgs=!0},initThree:function(){var t=document.getElementById("canvas"),e=window.innerWidth,i=window.innerHeight;t.width=this.width,t.height=this.height,this.scene=new $["cb"],this.bgCol=new $["i"]("rgb(255, 255, 255)"),this.scene.background=this.bgCol;this.far=6,this.camera=new $["T"](75,e/i,.1,1e3),this.camera.position.z=0,this.camera.position.y=1,this.geometry=new $["d"](.2,.2,.2),this.material=new $["J"]({color:16777215,transparent:!1,opacity:1,overdraw:.5}),this.mesh=new $["I"](this.geometry,this.material),console.log(this.mesh),this.mesh.position.y+=.1,this.scene.add(this.mesh),this.renderer=new $["pb"]({canvas:t,antialias:!0,alpha:!1}),this.renderer.setSize(e,i);var o=new $["p"](16777215,4473924);o.position.set(0,0,0),this.scene.add(o);var s=new $["R"];this.orbit=s,console.log(this.orbit),console.log(new $["R"]),this.orbit.rotation.order="YXZ",this.orbit.position.copy(this.mesh.position),this.scene.add(this.orbit);var n=1;this.camera.position.z=n,this.orbit.add(this.camera),document.addEventListener("mousemove",function(t){var e=-1e-4;this.orbit.rotateY(t.movementX*e),this.orbit.rotateX(t.movementY*e),this.orbit.rotation.z=0}.bind(this));var r=new $["j"](16777215);r.position.set(-3,10,-10),r.castShadow=!0,r.shadow.camera.top=2,r.shadow.camera.bottom=-2,r.shadow.camera.left=-2,r.shadow.camera.right=2,r.shadow.camera.near=.1,r.shadow.camera.far=40,this.clock=new $["h"],this.time=0,this.delta=0;var a=100,c=50,l=new $["n"](a,c);l.position.y=0,this.scene.add(l),this.initBgAnim(),this.tick=0,this.animate()},animate:function(){this.renderer.render(this.scene,this.camera),this.shapes.forEach((function(t,e){var i=t.rotYOffset;t.rotation.y=i}));var t=.09;this.orbit.position.x=Math.cos(this.tick)*t,this.orbit.position.y=Math.sin(this.tick)*t,requestAnimationFrame(this.animate),this.tick+=.02,console.log(this.tick)},initBgAnim:function(){document.getElementById("canvas");this.shapes=[];var t=3,e=3,i=.01;new $["d"](t,e,i);console.log(this.imgDict)},handleResize:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()},getPalDist:function(t,e){for(var i=t.length,o=[],s=[],n=0;n<i;n++){var r=JSON.parse(JSON.stringify(t[n])),a=this.getMinDist(r,e);o.push(a);var c=JSON.parse(JSON.stringify(e[n])),l=this.getMinDist(c,t);s.push(l)}var h=o.reduce((function(t,e){return t+e})),u=s.reduce((function(t,e){return t+e})),d=h/i,p=u/i,f=(d+p)/2;return f},getMinDist:function(t,e){for(var i=M["rgb_to_lab"](t),o=1/0,s=0;s<e.length;s++){var n=M["rgb_to_lab"](e[s]),r=M["diff"](n,i);o=Math.min(r,o)}return o}}}),B=A,W=(i("255d"),i("a523")),L=Object(b["a"])(B,a,c,!1,null,null,null),J=L.exports;S()(L,{VCol:P["a"],VContainer:W["a"],VRow:_["a"],VSpacer:j["a"]});var V=i("898b"),z=i("2591"),G={name:"App",components:{SearchView:J},data:function(){return{imgDict:null,clustDict:null}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["a"]("data/clust_asns_cap.csv");case 2:i=e.sent,o=t.parseData(i),t.imgDict=o[0],t.clustDict=o[1],console.log(t.clustDict),console.log(t.imgDict);case 8:case"end":return e.stop()}}),e)})))()},methods:{makePaletteObject:function(t){for(var e=[],i=0;i<t.length;i++){var o=t[i],s={r:255*o[0],g:255*o[1],b:255*o[2]};e.push(s)}return e},parseData:function(t){for(var e={},i={k2:{1:[],2:[]},k3:{1:[],2:[],3:[]},k4:{1:[],2:[],3:[],4:[]},k5:{1:[],2:[],3:[],4:[],5:[]},k6:{1:[],2:[],3:[],4:[],5:[],6:[]},k7:{1:[],2:[],3:[],4:[],5:[],6:[],7:[]},k8:{1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[]}},o=0;o<t.length;o++){var s=t[o],n=s.imgs,r=JSON.parse(s.palette),a=this.makePaletteObject(r),c={name:n,k2:s.k2,k3:s.k3,k4:s.k4,k5:s.k5,k6:s.k6,k7:s.k7,k8:s.k8,caption:s.caption,palette:a};e[n]=c,i.k2[s.k2].push(c),i.k3[s.k3].push(c),i.k4[s.k4].push(c),i.k5[s.k5].push(c),i.k6[s.k6].push(c),i.k7[s.k7].push(c),i.k8[s.k8].push(c)}return[e,i]}}},Y=G,U=(i("034f"),Object(b["a"])(Y,s,n,!1,null,null,null)),F=U.exports,X=i("f309");o["a"].use(X["a"]);var K=new X["a"]({});o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(F)},vuetify:K,created:function(){var t={apiKey:"AIzaSyCs2jefWbysKYQObYUtg8KRXvCZ_3nlNZ0",authDomain:"sweaterpalettes.firebaseapp.com",projectId:"sweaterpalettes",storageBucket:"sweaterpalettes.appspot.com",messagingSenderId:"615281655256",appId:"1:615281655256:web:7de3b15d9a67d470c206ad",measurementId:"G-NC1Q5LE31R"};z["a"].initializeApp(t),z["a"].analytics()}}).$mount("#app")},7512:function(t,e,i){"use strict";i("9543")},"85ec":function(t,e,i){},9543:function(t,e,i){},"9a1c":function(t,e,i){"use strict";i("3c58")},"9d7b":function(t,e,i){},aef3:function(t,e,i){},d1d8:function(t,e,i){"use strict";i("9d7b")}});
//# sourceMappingURL=app.bcd69c8f.js.map